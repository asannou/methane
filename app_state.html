<script>
    // 1. Global Application State Management
    const AppState = {
        currentPolicyData: null,
        currentProposal: null,
        activeRequestId: null,
        isPolicyEditing: false,
        geminiModelName: null, // NEW: Current selected Gemini model name
        // Cache for frequently accessed DOM elements
        domElements: {},
        // Map to store original button HTML content for spinner management
        originalButtonContents: new Map()
    };
</script>